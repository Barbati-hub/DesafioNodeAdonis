<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Desafio Node</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <div class="bg-white p-8 rounded-lg shadow-md w-96">
        <h1 class="text-2xl font-bold text-center mb-6">Bem-vindo ao Sistema</h1>
        
        <!-- Error Message -->
        <div id="errorMessage" class="hidden mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded">
        </div>
        
        <div class="space-y-4">
            <a href="/auth/google" 
               id="googleLoginBtn"
               class="flex items-center justify-center w-full px-4 py-2 text-white bg-blue-600 rounded hover:bg-blue-700 transition-colors">
                <img src="https://www.google.com/favicon.ico" alt="Google Logo" class="w-6 h-6 mr-2">
                <span id="googleBtnText">Entrar com Google</span>
            </a>
        </div>
    </div>

    <script>
        // Logs para debug
        console.log('Página de login carregada');
        
        // Verificar parâmetros na URL
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('error')) {
            const errorMessage = document.getElementById('errorMessage');
            errorMessage.textContent = 'Erro na autenticação. Por favor, tente novamente.';
            errorMessage.classList.remove('hidden');
            console.log('Erro detectado na URL:', urlParams.get('error'));
        }
        
        document.getElementById('googleLoginBtn').addEventListener('click', function(e) {
            console.log('Botão do Google clicado');
            const btnText = document.getElementById('googleBtnText');
            btnText.textContent = 'Redirecionando...';
            
            // Log do URL de redirecionamento
            console.log('Redirecionando para:', this.href);
            
            // Não vamos prevenir o comportamento padrão para permitir o redirecionamento
            // mas vamos adicionar um timestamp para debug
            console.log('Timestamp do clique:', new Date().toISOString());
        });

        // Detectar se estamos voltando de uma tentativa de autenticação
        if (document.referrer.includes('auth/google')) {
            console.log('Voltando da autenticação Google');
            console.log('Referrer:', document.referrer);
        }
    </script>
</body>
</html> 